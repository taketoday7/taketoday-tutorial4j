自动化在这个以技术为中心的世界中具有至关重要的地位。更快和更短的版本正在流行。除此之外，敏捷开发方法已在软件行业站稳脚跟。我们在敏捷中开发软件自动化测试的方式发生了显着变化。

## API 测试需求上升

仅使用 GUI 测试进行自动化的旧做法已不复存在。此外，***使用 GUI 测试进行软件测试的问题***有很多。列举几个：

- *由于 UI 的频繁更改，测试可能经常失败*
- *与易碎测试相关的额外维护和重构工作*
- *此外，这是一个耗时的测试过程，并且反馈速度较慢。*
- *它在可维护性和稳定性方面需要大量的主动性。*

在为期两周的对齐[***sprint***](https://www.toolsqa.com/agile/scrum/sprint/)中，准备好 UI 并同时对其进行测试以获得测试覆盖率结果完全具有挑战性。与
GUI 测试不同，*API*测试不依赖于 UI。[***在敏捷开发***](https://www.toolsqa.com/agile/what-is-agile/)
下结合/集成它们变得更加舒适。此外，它可以在开发阶段更早地引入。API 测试的增加/[
***上升趋势***](https://trends.google.com/trends/explore?date=today 5-y&q=%2Fm%2F0139ygq7)进一步强调了这一点。

API 抽象了实现层，只公开开发人员需要的对象。它由*REST*方法组成。此外，这些*REST*方法获取、操作和删除应用程序数据库中的数据。我们需要熟悉
*REST API*基础的工作原理。请阅读[***REST API 教程***](https://www.toolsqa.com/rest-assured-tutorial/)以熟悉这些内容。

一旦我们熟悉了*REST API 基础知识，*就该学习测试*REST API。*要测试一个*REST API，*我们必须了解*API 的接口。*这包括：

- *我们可以使用 API 执行的操作*
- *请求的结构*
- *响应结构*

因此，朝着这个方向迈出的重要一步是查看***API 文档***。在本文中，我们将介绍：-

- *为什么我们需要 API 文档？*
- *什么是 API 文档？*
- *如何使用 API 文档？*
- *API 有哪些不同类型的测试？*

让我们首先了解 API 文档的好处。

## 为什么我们需要 API 文档？

任何技术的文档对采用及其使用都有直接影响。没有工具的知识，没有人会知道如何使用它。此外，它还有其他优点，如下所示：

- *它为 API 使用提供了快速简便的指南。*
- *减少用户的挫败感。*
- *展示有用的功能。*
- *节省支持成本和时间。*

这些是 API 文档的一些好处。让我们学习和理解 API 文档的全部内容。

## 什么是 API 文档？

API 文档类似于参考手册。它从以下方面讨论 API 的必要信息：

### ***资源说明***

API 返回的数据是资源。可以使用各种端点来访问资源。在同一个资源下，一个 API 将有多个路由分组。资源和端点描述通常简短而准确。此外，用户指南包含更详细的信息。

### ***方法及其端点***

端点是 API 文档的重要组成部分。开发人员实现它以发出请求。端点指示访问资源的方式。这些方法指示与资源的允许交互，例如
*GET、PUT、POST 或 DELETE*。端点，类似于整体资源描述，也有简短的描述。端点显示资源的结束路径。它不包括通向所有端点的公共基本路径。

考虑作为 TOOLSQA 提供的示例 API 集合- TOOLSQA***提供的***[***书店 API***](https://demoqa.com/swagger/) 。请导航到
URL。因此，一旦页面打开，我们将看到：

![Api 文档示例](https://toolsqa.com/gallery/Rest%20Assured/1.Api%20Documentation%20Example.png)

在上图中：

Bookstore 和 Account 是Bookstore API 中可用的**资源**

HTTP**方法**充当动词。上图中列出的动词*POST、GET、DELETE是一些示例。*此外，还有其他的，如*PUT、PATCH、OPTION*等。

上图中的**路线是：**

1. */Account/v1/授权*
2. */Account/v1/GenerateToken*
3. */帐户/v1/用户*
4. */帐户/v1/用户/{GUID}*
5. */Account/v1/User/{UserId}*
6. */书店/v1/书籍*
7. */书店/v1/书籍*

路由遵循形成**端点的方法。**例如，***GET /Account/v1/Authorized***。

***注意：我们在示例**[书店 API URL](https://demoqa.com/swagger/)中列出了很少的端点。但在实际项目中，端点列表可能会很大。*

对于端点，不需要在 API 文档中列出完整的资源 URL。因此，在我们的示例中，列出了***GET /Account/v1/Authorized*** 而不是
***GET http://bookstore.toolsqa.com/Account/v1/Authorized***

这样做的目的是使用户专注于路径。此外，用户指南在介绍部分提供了完整的资源 URL 和所需的授权。

### ***使用的参数***

参数是控制资源的选项。有四种参数：

1. ***标头参数：*
   *顾名思义，这些是传递给请求标头的参数。它们通常与授权相关，并包含在标准标头参数的授权要求的单独部分中。此外，在标头中传递的唯一参数的情况下，它们会与相应的端点一起记录。*
2. ***路径参数：** 路径参数是端点的一部分。它们不是可选的。我们通常将它们与花括号一起写。例如， **/Account/v1/User/{UserId}**
   这里，**{UserId}**是路径参数。*
3. ***查询参数：**它们附加到 URL 端。此外，查询参数在添加“？”后附加到 URL 在 URL
   的末尾。您可以在[***查询参数教程***](https://www.toolsqa.com/rest-assured/query-parameters-in-rest-assured/)
   中阅读更多内容。*
4. ***请求体参数：**在一个 POST 请求中，多次在请求体中提交一个 JSON 对象。此外，它是一个键值对列表。*

***例子：***

```java
{
"username": "TOOLSQA-Test",
"password": "Test@@123"
}
```

### ***请求和响应示例***

![REST API 文档](https://toolsqa.com/gallery/Rest%20Assured/2.REST%20API%20Documentation.png)

在上面的示例中，我们将用户名和密码作为请求正文参数传递。
***我们收到了 200 状态代码响应以及我们发送的端点/Account/v1/GenerateToken***的 POST 请求的响应正文。

此外，如果您注意到突出显示的部分，那是 curl 命令的部分。

```java
curl -X POST "https://bookstore.toolsqa.com/Account/v1/GenerateToken" -H "accept: application/json" -H "authorization: Basic VE9PTFNRQS1UZXN0OlRlc3RAQDEyMw==" -H "Content-Type: application/json" -d "{ \"userName\": \"TOOLSQA-Test\", \"password\": \"Test@@123\"}"
```

我们遵循 Curl 格式有几个原因：

- *首先，curl 独立于编程语言。*
- *其次，它由请求头信息组成。*
- *此外，它还显示 Request 方法。*

至此，我们已经了解了一个典型的 API 文档的内容。API 文档可能包含附加信息。但是本教程的上述部分让我们大致了解了 API
文档中包含的所有内容。随后，在我们的下一阶段，我们将学习 API 文档的用法。

## 如何使用 API 文档？

为了了解 Swagger API 文档的使用，我们将使用之前使用的相同[***Bookstore API***](https://demoqa.com/swagger/)
。它包含一个沙盒环境，用于测试文档中的 API。

导航到***书店 API。***您将看到以下内容：

![Swagger API 文档示例](https://toolsqa.com/gallery/Rest%20Assured/3.Example%20of%20Swagger%20API%20DOcument.png)

端点分组如下：

- *帐户*
- *书店*

下面列出的一些 API 端点构建了我们的端到端 Rest API 框架。一旦您学会了使用本节末尾的 API 文档，请尝试这些示例。

| ***HTTP 动词*** | ***路线***                    | ***目的***             |
|---------------|-----------------------------|----------------------|
| ***邮政***      | */Account/v1/GenerateToken* | *按照端点名称生成令牌*         |
| ***得到***      | */帐户/v1/用户*                 | *使用关联用户创建 userId*    |
| ***得到***      | */书店/v1/书籍*                 | 获取书籍列表               |
| ***邮政***      | */书店/v1/书籍*                 | *添加与用户关联的书籍*         |
| ***删除***      | */书店/v1/书籍*                 | *删除一本书*              |
| ***得到***      | */Account/v1/User/{UserId}* | *获取与 userId 关联的书籍列表* |

我们列出了以下来自***书店 API 的一些 API***。他们将帮助我们使用 Swagger 了解请求及其响应主体。

1. *创建用户*
2. *使用创建的用户生成令牌*

### ***API 文档 - 创建用户 - POST***

在开始探索 API 之前，我们需要创建一个具有***用户名***和***密码***的用户。随后，在 Book Store Credentials 下添加所需的用户名和密码。

***注意**：请选择您的用户名和密码，一旦创建，请记住在所有测试中使用相同的用户名和密码。例如，在整个过程中，我们将使用*
*TOOLSQA-Test**作为用户名，使用**Test @@123**作为密码。*

现在，让我们尝试使用用户的*POST* 请求创建一个用户 ID。

***发出请求***

1. *首先，展开Account下端点的POST方法：**/Account/v1/User***
2. *其次，单击**试用**按钮。请求正文字段可编辑。*
3. *第三，添加用户名和密码。您现在已添加，如下面的屏幕截图所示。之后，选择参数**内容类型为 application/json**。单击**执行**
   按钮。*
4. *最后，Swagger 提交请求。它显示了提交的卷曲。在响应部分中观察到请求的响应。*

![API 文档图像：用户创建 API 解释](https://toolsqa.com/gallery/Rest%20Assured/4.API%20Document%20Image%20User%20Creation%20API%20Explained.png)

***注意：**请记下用户 ID。请求正文中的其他 API 将需要它。*

***说明：*** 我们传递了一个*带有JSON*格式的用户名和密码***的POST 请求。***我们得到了一个***201 状态码***以及*用户
ID，以及与****响应正文***中的相应用户名相关联的书籍。它说明我们的请求已成功通过服务器发送，如上图描述下的所示。此外，Swagger
的实现简单而有用。它提供了一种交互式体验来发送请求和接收 API 响应。

作为软件专业人士，我们需要了解构建伟大软件的基础。众多方法之一是以各种方式尝试和测试它们。我们熟悉了 API 文档。此外，Swagger
为我们提供了在[***Swagger UI***](https://swagger.io/tools/swagger-ui/)本身上对其进行测试的方法。

### ***API 文档 - 生成令牌 - POST***

现在我们已经在之前的响应中创建了一个用户，让我们尝试使用用户的*POST* 请求创建一个令牌。

![API 文档生成令牌解释](https://toolsqa.com/gallery/Rest%20Assured/5.%20API%20Documentation%20%20Generate%20Token%20explained.png)

***说明：*** 我们发送的请求正文包含***application/json***格式的用户名和密码。当我们点击***Execute***按钮时，我们得到一个
200 状态码。此外，我们还得到了一个包含令牌、过期、状态和结果字段的响应正文。在下一节中，我们将了解 API 测试的上下文并研究其各种类型。

## 有哪些不同类型的 API 测试？

在开始对 API 进行实际测试之前，我们需要编译 API 的相关信息。我们进行测试的环境至关重要，因为它推动了我们的测试工作。

以下是我们在开始测试 API 之前可以寻求的信息的非全面列表：

- *成功请求的预期响应代码*
- *来自不成功请求的预期响应代码*
- *要验证的字段*
- *所需参数*
- *不成功请求的错误处理*
- *我们可以与端点一起使用的 HTTP 动词*

让我们了解一下，API 测试可以分为哪些类别。这并不是说我们已经列出了一份完整的清单；我们可以将更多类型添加到列表中。但或多或少，API
测试属于下面提到的类别之一。

1. ***验证测试：**它构成了软件开发过程中的最后一部分。它迎合了为评估产品而明确进行的测试；它的行为和效率。根据预期检查 API
   在实现中的正确性。此外，API 还根据预先确定的商定标准进行验证，例如特定最终目标的交付、与指定环境的集成。除此之外，测试 API
   访问正确数据的行为是验证测试的一部分。*
2. ***功能测试：**这是更广泛的测试类型之一。它旨在测试指定的功能。在测试 API
   以进行功能测试时，对收到的响应的评估会根据传递参数的预期响应进行。此外，在这些测试中也正在考虑对不成功请求和无效响应的错误处理。边界情况以及常规测试都属于这些测试的范围。*
3. ***UI 测试：** UI 测试往往更具体。这些测试根据 API 及其组成部分评估用户界面。此外，测试更加通用，重点关注 API
   健康；它的可用性以及前端和后端的兼容性。*
4. ***负载测试：**此测试用于测试 API 在负载下的功能和性能。API 经历理论上的常规流量。测试结果形成基线以进行进一步的负载测试。此外，测试还包括使
   API 承受最大可能的流量，以测试 API 在满负载下的行为。API 会经过重载测试。在此测试中，将验证 API
   性能和故障期间的错误处理条件。*
5. ***错误检测：** API的测试，包括监控、引发执行错误、发送无效请求、检测操作泄漏等都属于这一类。在 API 中引入了已知的故障场景。这些
   API 的测试恰好确保检测、处理和路由错误。*
6. ***API 安全性测试：**特定测试验证 API
   性能是否存在来自外部威胁的漏洞。安全测试、渗透测试和模糊测试是其中的一部分。例如，**安全测试**涉及在安全要求方面验证
   API。此外，这些安全要求可能与权限、授权、身份验证等有关。作为**渗透测试**的一部分，对系统发起授权攻击。它评估 API 的安全性。API
   的优缺点的全面评估报告是此类测试后发布的可交付成果。在**模糊测试中**，对 API
   行为进行评估。它受到意外、无效和随机的巨大数据的影响。在此之后，崩溃、内置断言和内存泄漏是已知的。*
7. ***集成测试：** 集成测试侧重于与另一个模块 API 的 API 通信。*
8. ***可靠性测试：** API 应针对不同的配置显示提示响应。它还寻找响应数据结构作为测试的一部分。*

总之，在这篇文章中，我们对 API 文档有所了解。我们学会了使用 Swagger API 文档。此外，我们熟悉了*API*测试的类型。

在进一步的文章中，我们将学习围绕 API 测试构建[
***REST API 自动化框架。***](https://toolsqa.com/rest-assured/rest-api-test-using-rest-assured/)按照上面的指导尝试使用
API 文档，并寻求您的宝贵反馈。